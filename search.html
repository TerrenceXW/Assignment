<!DOCTYPE html>
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if IE 7]> <html class="no-js lt-ie9 lt-ie8" lang="en"> <![endif]-->
<!--[if IE 8]> <html class="no-js lt-ie9" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
<head>
<title>TERR SITE</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width">
<link rel="stylesheet" href="stylesheets/foundation.min.css">
<link rel="stylesheet" href="stylesheets/main.css">
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular.min.js"></script>
<script src="javascripts/modernizr.foundation.js"></script>
<!-- Google fonts -->
<link href='http://fonts.googleapis.com/css?family=Open+Sans+Condensed:300|Playfair+Display:400italic' rel='stylesheet' type='text/css' />
<!-- IE Fix for HTML5 Tags -->
<!--[if lt IE 9]>
<script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
</head>
<body>
<div class="row"> <a href="index.html"><img src="images/logo.png" alt="" style="border:none; margin-top:25px"></a> </div>
<div class="row page_wrap" style="margin-top:-2px">
  <!-- page wrap -->
  <div class="twelve columns">
    <!-- page wrap -->
    <div class="row">
      <div class="twelve columns header_nav" style="margin-bottom:0; box-shadow: none">
        <div class="twelve columns">
          <ul id="menu-header" class="nav-bar horizontal">
            <li><a href="index.html">Home</a></li>
            <li class="has-flyout"> <a href="#">Example Pages</a><a href="#" class="flyout-toggle"></a>
              <ul class="flyout">
                <li class="has-flyout"><a href="search.html">Search API</a></li>
                <li class="has-flyout"><a href="contact.html">Contact Page</a></li>
              </ul>
            </li>
            <li ><a href="api.html">Terrible API ENDPOINTS</a></li>
            <li ><a href="favourites.html">Favourites List</a></li>
            <li ><a href="pinterest-style.html">Pinterest Gallery</a></li>
            <li ><a href="tiles.html">Tiles</a></li>
          </ul>
   
        </div>
      </div>
    </div>
    <!-- END Header -->
     <div class="heading_dots hide-for-small">
      <h1 class="heading_supersize"><span class="heading_center_bg">Search API</span></h1>
    
	</div>
	<div ng-app="">
	<input id="search" ng-model="name" type="text" maxlength="70"> </input>
	<p style="margin: 6px 0">
	<a id="clear_button" class="button radius">Clear Search Data</a>
	
	Do you want to search "{{name}}" ?
	<a id="search_button" class="button radius">Search</a></p>
	
	
	</div>
	<TABLE id ="test" width="100%" style="word-break:break-all">



	
	
	</table>
    <div class="row">
      <div class="twelve columns">
        <ul id="menu3" class="footer_menu horizontal">
          <li><a href="index.html">Home</a></li>
        </ul>

      </div>
    </div>
  </div>
  <!-- end page wrap) -->
</div>
<!-- end page wrap) -->
<!-- Included JS Files (Compressed) -->
<script src="javascripts/foundation.min.js"></script>
<!-- Initialize JS Plugins -->
<script src="javascripts/app.js"></script>
</body>
<script>






$(function() {
	$("#clear_button").click(function(e) {
	window.location.reload(true);
	});
	
	$("#search_button").click(function(e) {
	var $orders = $('#test');
	
        var params = {
            // Request parameters
            "q": document.getElementById('search').value,
            "count": "5",
            "offset": "0",
            "mkt": "en-us",
            "safesearch": "Moderate",
        };
      
        $.ajax({
            url: "https://api.cognitive.microsoft.com/bing/v5.0/search?" + $.param(params),
            beforeSend: function(xhrObj){
                // Request headers
                xhrObj.setRequestHeader("Ocp-Apim-Subscription-Key","de2b98b9c2544afd995d5246eb7f6cb2");
            },
            type: "GET",
            // Request body
            data: "{body}",
        })
        .done(function(data) {
		alert(JSON.stringify(data.webPages.value[0]));
		
		$('#test').empty();

		$orders.append('<tr><td><h2>'+data.webPages.value[0].name+'</h2><a href="/'+data.webPages.value[0].url+'">'+data.webPages.value[0].displayUrl+ '</a><br>'+data.webPages.value[0].snippet+'<br>Last crawed at :'+data.webPages.value[0].dateLastCrawled+'</td></tr>' );
		
		$orders.append('<tr><td><h2>'+data.webPages.value[1].name+'</h2><a href="/'+data.webPages.value[1].url+'">'+data.webPages.value[1].displayUrl+ '</a><br>'+data.webPages.value[1].snippet+'<br>Last crawed at :'+data.webPages.value[1].dateLastCrawled+'</td></tr>' );
		
		$orders.append('<tr><td><h2>'+data.webPages.value[2].name+'</h2><a href="/'+data.webPages.value[2].url+'">'+data.webPages.value[2].displayUrl+ '</a><br>'+data.webPages.value[2].snippet+'<br>Last crawed at :'+data.webPages.value[2].dateLastCrawled+'</td></tr>' );	
		
		$orders.append('<tr><td><h2>'+data.webPages.value[3].name+'</h2><a href="/'+data.webPages.value[3].url+'">'+data.webPages.value[3].displayUrl+ '</a><br>'+data.webPages.value[3].snippet+'<br>Last crawed at :'+data.webPages.value[3].dateLastCrawled+'</td></tr>' );
 
		$orders.append('<tr><td><h2>'+data.webPages.value[4].name+'</h2><a href="/'+data.webPages.value[4].url+'">'+data.webPages.value[4].displayUrl+ '</a><br>'+data.webPages.value[4].snippet+'<br>Last crawed at :'+data.webPages.value[4].dateLastCrawled+'</td></tr>' );
		})
		
        .fail(function() {
            alert("error");
        });
		});
    });
</script>


</html>